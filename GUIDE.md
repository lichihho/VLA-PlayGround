# VLA PlayGround — 視覺景觀研究遊樂園

歡迎來到 VLA PlayGround（Visual Landscape Analysis PlayGround）！

這是一個整合了 AI 景觀影像分析工具的互動式研究環境。你可以直接用自然語言請 Claude 幫你分析景觀照片、管理 NAS 上的資料集、查看分析結果，不需要寫任何程式碼。

---

## 環境裡有什麼？

本環境連接了兩個 AI 服務，部署在區域網路的 K8s 叢集上：

### 1. LaDeco — 景觀影像語意分割

基於 OneFormer 模型（ADE20K 資料集），能將景觀照片中的每個像素分類，並計算各類別的面積比例。

**核心能力：**
- 分析單張或多張景觀影像的組成比例
- 批次處理整個資料集並產出 CSV
- 產生彩色語意分割圖（視覺化）
- 計算自然特徵指數（LC_NFI）

### 2. NAS File Server — 檔案管理

操作 NAS 儲存設備上的資料集檔案。

**核心能力：**
- 瀏覽、搜尋 NAS 上的資料集和檔案
- 讀取、寫入、複製、搬移、刪除檔案
- 查看檔案詳細資訊（大小、日期等）

---

## 4 層標籤階層

LaDeco 使用自訂的 4 層階層標籤系統，從粗到細：

| 層級 | 說明 | 類別數 | 範例 |
|------|------|--------|------|
| **L1** | 自然 vs. 人造 | 2 | nature, man_made |
| **L2** | 主要類別 | 7 | 生物、地形、天空、植被、水體、建築、街道 |
| **L3** | 中等細分 | 16 | 草本植物、木本植物、水平水體、垂直水體… |
| **L4** | 精細類別 | ~50 | 樹、草、道路、建築物、汽車、河流… |

分析時預設使用 **L2**。你可以指定想看哪一層的結果。

---

## 你可以這樣問我

### 影像分析

> 「幫我分析這張照片的景觀組成」
>
> 「用 L3 層級分析 /mnt/ai_data/campus/photo01.jpg」
>
> 「這張照片的自然特徵指數是多少？」
>
> 「產生這張照片的語意分割圖讓我看看」

### 批次處理

> 「NAS 上有哪些資料集？」
>
> 「幫我預覽 campus_photos 資料集裡有什麼」
>
> 「批次分析 park_survey 資料集，用 L2 層級」

### 比較分析

> 「比較這兩張照片的綠覆率差異」
>
> 「這個資料集裡哪張照片的 LC_NFI 最高？」

### 檔案管理

> 「NAS 上的 datasets 資料夾裡有什麼？」
>
> 「搜尋 NAS 上所有 .jpg 檔案」
>
> 「把分析結果存到 NAS 上」

### 了解系統

> 「L1 到 L4 分別有哪些類別？」
>
> 「顯示 L3 的色彩圖例」
>
> 「解釋一下 LC_NFI 是什麼」

---

## 實用工作流程

### 工作流程 1：快速分析一張照片

1. 告訴我照片路徑（NAS 上的路徑，或上傳照片）
2. 我會回傳各類別的面積比例與 LC_NFI
3. 需要的話，我可以產生分割圖讓你看

### 工作流程 2：批次分析整個資料集

1. 先用 `list_datasets` 查看有哪些資料集
2. 選定資料集後進行批次分析
3. 結果會存成 CSV 檔，可供下載

### 工作流程 3：資料集管理

1. 用 NAS File Server 瀏覽現有資料集
2. 整理檔案（搬移、複製、重命名）
3. 上傳新影像到指定資料集目錄

---

## 技術細節

| 項目 | 說明 |
|------|------|
| 模型 | OneFormer (Swin-L, ADE20K) |
| 分類數 | ADE20K 150 類 → LaDeco 4 層階層 |
| 指標 | LC_NFI（自然特徵指數）= 自然面積比例 |
| 服務位址 | LaDeco `192.168.1.162:30800`、NAS `192.168.1.162:30803` |
| REST API 文件 | 詳見 `api-reference.md` 或 Swagger UI (`/api/docs`) |

---

## 參考文獻

Li-Chih Ho (2023). *LaDeco: A Tool to Analyze Visual Landscape Elements*. Ecological Informatics, vol. 78.
